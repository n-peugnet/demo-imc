!function(t,e){for(var i in e)t[i]=e[i]}(window,function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=11)}([function(t,e,i){!function(){"use strict";var e={event:"click",position:"bottom",horizontalOffset:0,verticalOffset:0,data:{}},i=!1,n=null,r=function(t){return!!(t&&t.constructor&&t.call&&t.apply)},s=function(t){var e=arguments.length;if(e<2||null===t)return t;for(var i=1;i<e;i++){var n=arguments[i];for(var r in n)t[r]=n[r]}return t},o=function(t){return"undefined"!=typeof jQuery&&t instanceof jQuery?t:t instanceof HTMLElement?[t]:function(t){return"string"==typeof t||t instanceof String}(t)?document.querySelectorAll(t):t instanceof NodeList?t:[]},a=function(t){if(t.stopPropagation(),t.preventDefault(),n=t.target,u(),n.ctxMenu){var e=l(n);document.body.appendChild(e),i=!0,setTimeout(function(){window.addEventListener("click",u),window.addEventListener("resize",u),window.addEventListener("scroll",u),e.style.visibility="visible",h(t,n,e)},1)}},l=function(t){var e,i=document.createElement("div");for(e in i.className="context-menu",i.style.visibility="hidden",i.style.display="inline-block",t.ctxMenu.menu){var n=t.ctxMenu.menu[e],s=document.createElement("div");s.ctxMenu={key:e,enabled:!!n.enabled},s.ctxMenu.enabled?s.className="context-menu-item":s.className="context-menu-item-disabled",s.innerHTML=n&&n.label?n.label:e,s.ctxMenu.enabled&&(r(n.onSelect)?s.ctxMenu.onSelect=n.onSelect:s.ctxMenu.onSelect=c,s.addEventListener(t.ctxMenu.event,function(e){this.ctxMenu.onSelect(t,this.ctxMenu.key,s,t.ctxMenu.data),u()})),n.title&&(s.title=n.title),i.appendChild(s)}return i},h=function(t,e,i){var n=0,r=0,s=e.getBoundingClientRect(),o=i.getBoundingClientRect(),a="click";e.ctxMenu&&e.ctxMenu.position&&(a=e.ctxMenu.position),"bottom"===a?(n=s.left+e.ctxMenu.horizontalOffset,r=s.bottom+e.ctxMenu.verticalOffset):"top"===a?(n=s.left+e.ctxMenu.horizontalOffset,r=s.top-o.height+e.ctxMenu.verticalOffset):"right"===a?(n=s.left+s.width+e.ctxMenu.horizontalOffset,r=s.top+e.ctxMenu.verticalOffset):"left"===a?(n=s.left-o.width+e.ctxMenu.horizontalOffset,r=s.top+e.ctxMenu.verticalOffset):(n=t.clientX+e.ctxMenu.horizontalOffset,r=t.clientY+e.ctxMenu.verticalOffset),n<0&&(n=e.ctxMenu.horizontalOffset>=0?e.ctxMenu.horizontalOffset:0),r<0&&(r=e.ctxMenu.verticalOffset>=0?e.ctxMenu.verticalOffset:0),n+o.width>document.body.clientWidth&&(n=e.ctxMenu.horizontalOffset>=0?document.body.clientWidth-o.width:document.body.clientWidth-o.width+e.ctxMenu.horizontalOffset),r+o.height>document.body.clientHeight&&(r=e.ctxMenu.verticalOffset>=0?document.body.clientHeight-o.height:document.body.clientHeight-o.height+e.ctxMenu.verticalOffset),i.style.left=n+"px",i.style.top=r+"px"},c=function(t,e,i){},u=function(){var t=0,e=document.getElementsByClassName("context-menu");for(window.removeEventListener("click",u),window.removeEventListener("resize",u),window.removeEventListener("scroll",u),t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t]);i=!1},d=function(t,e,i){var n=0,r=o(t);for(n=0;n<r.length;n++)r[n].ctxMenu.menu.hasOwnProperty(e)&&(r[n].ctxMenu.menu[e].enabled=i)},p=function(t){var e,i={type:"item",enabled:!0,label:"",onSelect:function(){},icon:"",title:""};for(e in t){var n=s({},i);t[e]?r(t[e])?t[e]=s(n,{label:e,onSelect:t[e]}):t[e]=s(n,t[e]):t[e]=s(n,{label:e})}return t},f={attach:function(t,i,n){var r=0;i=p(i);var l=s({menu:s({},i)},e,n),h=o(t);for(r=0;r<h.length;r++)h[r].ctxMenu=l,h[r].addEventListener(l.event,a)},display:function(t,i,n){i=p(s({},i));var r=s({menu:s({},i)},e,n);if(t instanceof Event)t.target.ctxMenu=r,a(t);else if("undefined"!=typeof jQuery&&t instanceof jQuery.Event)t.target.ctxMenu=r,a(t);else if(t instanceof HTMLElement){t.ctxMenu=r;var o=t.getBoundingClientRect(),l={target:t,clientX:o.left,clientY:o.top,stopPropagation:function(){},preventDefault:function(){}};a(l)}else console.log(t)},disable:function(t,e){d(t,e,!1)},enable:function(t,e){d(t,e,!0)},close:function(){u()},isOpen:function(){return i}};"function"==typeof window.define&&void 0!==window.define.amd?window.define("ContextMenu",[],function(){return f}):void 0!==t.exports?t.exports=f:window.ContextMenu=f}()},function(t,e){t.exports=window.p5},function(t){t.exports={a:"1.0.0-beta.0"}},function(t,e,i){var n,r,s;r=[],void 0===(s="function"==typeof(n=function(){return function t(e,i,n){var r,s,o=window,a="application/octet-stream",l=n||a,h=e,c=!i&&!n&&h,u=document.createElement("a"),d=function(t){return String(t)},p=o.Blob||o.MozBlob||o.WebKitBlob||d,f=i||"download";if(p=p.call?p.bind(o):Blob,"true"===String(this)&&(l=(h=[h,l])[0],h=h[1]),c&&c.length<2048&&(f=c.split("/").pop().split("?")[0],u.href=c,-1!==u.href.indexOf(c))){var b=new XMLHttpRequest;return b.open("GET",c,!0),b.responseType="blob",b.onload=function(e){t(e.target.response,f,a)},setTimeout(function(){b.send()},0),b}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(h)){if(!(h.length>2096103.424&&p!==d))return navigator.msSaveBlob?navigator.msSaveBlob(x(h),f):w(h);h=x(h),l=h.type||a}else if(/([\x80-\xff])/.test(h)){for(var g=0,m=new Uint8Array(h.length),v=m.length;g<v;++g)m[g]=h.charCodeAt(g);h=new p([m],{type:l})}function x(t){for(var e=t.split(/[:;,]/),i=e[1],n="base64"==e[2]?atob:decodeURIComponent,r=n(e.pop()),s=r.length,o=0,a=new Uint8Array(s);o<s;++o)a[o]=r.charCodeAt(o);return new p([a],{type:i})}function w(t,e){if("download"in u)return u.href=t,u.setAttribute("download",f),u.className="download-js-link",u.innerHTML="downloading...",u.style.display="none",document.body.appendChild(u),setTimeout(function(){u.click(),document.body.removeChild(u),!0===e&&setTimeout(function(){o.URL.revokeObjectURL(u.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var i=document.createElement("iframe");document.body.appendChild(i),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),i.src=t,setTimeout(function(){document.body.removeChild(i)},333)}if(r=h instanceof p?h:new p([h],{type:l}),navigator.msSaveBlob)return navigator.msSaveBlob(r,f);if(o.URL)w(o.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===d)try{return w("data:"+l+";base64,"+o.btoa(r))}catch(t){return w("data:"+l+","+encodeURIComponent(r))}(s=new FileReader).onload=function(t){w(this.result)},s.readAsDataURL(r)}return!0}})?n.apply(e,r):n)||(t.exports=s)},function(t,e,i){var n;!function(){"use strict";var r=function(){var t,e,i=[],n=-1,r=0,s=!1;return e=function(t,e){return t&&"function"==typeof t[e]?(s=!0,t[e](),s=!1,this):this},{add:function(e){return s?this:(i.splice(n+1,i.length-n),i.push(e),r&&i.length>r&&function(t,e,i){t.splice(e,!i||1+i-e+(!(i<0^e>=0)&&(i<0||-1)*t.length)),t.length}(i,0,-(r+1)),n=i.length-1,t&&t(),this)},setCallback:function(e){t=e},undo:function(){var r=i[n];return r?(e(r,"undo"),n-=1,t&&t(),this):this},redo:function(){var r=i[n+1];return r?(e(r,"redo"),n+=1,t&&t(),this):this},clear:function(){var e=i.length;i=[],n=-1,t&&e>0&&t()},hasUndo:function(){return-1!==n},hasRedo:function(){return n<i.length-1},getCommands:function(){return i},getIndex:function(){return n},setLimit:function(t){r=t}}};void 0===(n=function(){return r}.call(e,i,e,t))||(t.exports=n)}()},function(t,e,i){!function(){function e(t,e){var i=n("div",null,"qs_label",e);return i.innerHTML=t,i}function i(t,e,i,r){var s=n("input",e,i,r);return s.type=t,s}function n(t,e,i,n){var r=document.createElement(t);if(r)return r.id=e,i&&(r.className=i),n&&n.appendChild(r),r}function r(){return-1!=navigator.userAgent.indexOf("rv:11")||-1!=navigator.userAgent.indexOf("MSIE")}var s=!1,o=".qs_main{background-color:#dddddd;text-align:left;position:absolute;width:200px;font:12px sans-serif;box-shadow:5px 5px 8px rgba(0,0,0,0.35);user-select:none;-webkit-user-select:none;color:#000000;border:none}.qs_content{background-color:#cccccc;overflow-y:auto}.qs_title_bar{background-color:#eeeeee;user-select:none;-webkit-user-select:none;cursor:pointer;padding:5px;font-weight:bold;border:none;color:#000000}.qs_container{margin:5px;padding:5px;background-color:#eeeeee;border:none;position:relative}.qs_container_selected{border:none;background-color:#ffffff}.qs_range{-webkit-appearance:none;-moz-appearance:none;width:100%;height:17px;padding:0;margin:0;background-color:transparent;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_range:focus{outline:none;border:none}.qs_range::-webkit-slider-runnable-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-webkit-slider-runnable-track{background:#cccccc}.qs_range::-webkit-slider-thumb{-webkit-appearance:none;height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;margin-top:0}.qs_range::-moz-range-track{width:100%;height:15px;cursor:pointer;background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range::-moz-range-thumb{height:15px;width:15px;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer}.qs_range::-ms-track{width:100%;height:15px;cursor:pointer;visibility:hidden;background:transparent}.qs_range::-ms-thumb{height:15px;width:15px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:#999999;cursor:pointer;border:none}.qs_range::-ms-fill-lower{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-lower{background:#cccccc}.qs_range::-ms-fill-upper{background:#cccccc;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.qs_range:focus::-ms-fill-upper{background:#cccccc}.qs_button{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif}.qs_button:active{background-color:#ffffff;border:1px solid #aaaaaa}.qs_button:focus{border:1px solid #aaaaaa;outline:none}.qs_checkbox{cursor:pointer}.qs_checkbox input{position:absolute;left:-99999px}.qs_checkbox span{height:16px;width:100%;display:block;text-indent:20px;background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAALklEQVQ4T2OcOXPmfwYKACPIgLS0NLKMmDVrFsOoAaNhMJoOGBioFwZkZUWoJgApdFaxjUM1YwAAAABJRU5ErkJggg==') no-repeat}.qs_checkbox input:checked+span{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvElEQVQ4T63Tyw2EIBAA0OFKBxBL40wDRovAUACcKc1IB1zZDAkG18GYZTmSmafzgTnnMgwchoDWGlJKheGcP3JtnPceCqCUAmttSZznuYtgchsXQrgC+77DNE0kUpPbmBOoJaBOIVQylnqWgAAeKhDve/AN+EaklJBzhhgjWRoJVGTbNjiOowAIret6a+4jYIwpX8aDwLIs74C2D0IIYIyVP6Gm898m9kbVm85ljHUTf16k4VUefkwDrxk+zoUEwCt0GbUAAAAASUVORK5CYII=') no-repeat}.qs_checkbox_label{position:absolute;top:7px;left:30px}.qs_label{margin-bottom:3px;user-select:none;-webkit-user-select:none;cursor:default;font:12px sans-serif}.qs_text_input{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;padding:0 0 0 5px;height:24px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_text_input:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_select{background:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAp0lEQVRIS+2SsQ3FIAwF7RVYhA5mgQFhFuhYhJKWL0eKxI8SGylKZ0p4+OBsHGNM+HChAiS7qkgyBKrovaLeOxhjbgtxZ+cFtgelFMg5QwgBvPd/EO5sDbKAlBLUWo/8CjmL075zDmKMj6rEKbpCqBL9aqc4ZUQAhVbInBMQUXz5Vg/WfxOktXZsWWtZLds9uIqlqaH1NFV3jdhSJA47E1CAaE8ViYp+wGiWMZ/T+cgAAAAASUVORK5CYII=') no-repeat right #f6f6f6;-webkit-appearance:none;-moz-appearance:none;appearance:none;color:#000000;width:100%;height:24px;border:1px solid #aaaaaa;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;padding:0 5px;-moz-outline:none;font-size:14px}.qs_select option{font-size:14px}.qs_select::-ms-expand{display:none}.qs_select:focus{outline:none}.qs_number{height:24px}.qs_image{width:100%}.qs_progress{width:100%;height:15px;background-color:#cccccc;border:none;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_progress_value{height:100%;background-color:#999999}.qs_textarea{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;resize:vertical;width:100%;padding:3px 5px;border:1px inset #ffffff;background-color:#ffffff;color:#000000;font-size:12px}.qs_textarea:focus{outline:none;background:#ffffff;border:1px inset #ffffff}.qs_color{position:absolute;left:-999999px}.qs_color_label{width:100%;height:20px;display:block;border:1px solid #aaaaaa;cursor:pointer;padding:0 0 0 5px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.qs_file_chooser{position:absolute;left:-999999px}.qs_file_chooser_label{background-color:#f6f6f6;color:#000000;height:30px;border:1px solid #aaaaaa;font:12px sans-serif;width:100%;display:block;cursor:pointer;padding:7px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",a={_version:"2.1",_topZ:1,_panel:null,_titleBar:null,_content:null,_startX:0,_startY:0,_hidden:!1,_collapsed:!1,_controls:null,_keyCode:-1,_draggable:!0,_collapsible:!0,_globalChangeHandler:null,useExtStyleSheet:function(){s=!0},create:function(t,e,i,n){var r=Object.create(this);return r._init(t,e,i,n),r},destroy:function(){for(var t in this._panel.parentElement&&this._panel.parentElement.removeChild(this._panel),this)this[t]=null},_init:function(t,e,i,n){s||function(){var t=document.createElement("style");t.innerText=o,document.head.appendChild(t),s=!0}(),this._bindHandlers(),this._createPanel(t,e,n),this._createTitleBar(i||"QuickSettings"),this._createContent()},_bindHandlers:function(){this._startDrag=this._startDrag.bind(this),this._drag=this._drag.bind(this),this._endDrag=this._endDrag.bind(this),this._doubleClickTitle=this._doubleClickTitle.bind(this),this._onKeyUp=this._onKeyUp.bind(this)},getValuesAsJSON:function(t){var e={};for(var i in this._controls)this._controls[i].getValue&&(e[i]=this._controls[i].getValue());return t&&(e=JSON.stringify(e)),e},setValuesFromJSON:function(t){for(var e in"string"==typeof t&&(t=JSON.parse(t)),t)this._controls[e].setValue&&this._controls[e].setValue(t[e]);return this},saveInLocalStorage:function(t){return this._localStorageName=t,this._readFromLocalStorage(t),this},clearLocalStorage:function(t){return localStorage.removeItem(t),this},_saveInLocalStorage:function(t){localStorage.setItem(t,this.getValuesAsJSON(!0))},_readFromLocalStorage:function(t){var e=localStorage.getItem(t);e&&this.setValuesFromJSON(e)},_createPanel:function(t,e,i){this._panel=n("div",null,"qs_main",i||document.body),this._panel.style.zIndex=++a._topZ,this.setPosition(t||0,e||0),this._controls={}},_createTitleBar:function(t){this._titleBar=n("div",null,"qs_title_bar",this._panel),this._titleBar.textContent=t,this._titleBar.addEventListener("mousedown",this._startDrag),this._titleBar.addEventListener("dblclick",this._doubleClickTitle)},_createContent:function(){this._content=n("div",null,"qs_content",this._panel)},_createContainer:function(){var t=n("div",null,"qs_container");return t.addEventListener("focus",function(){this.className+=" qs_container_selected"},!0),t.addEventListener("blur",function(){var t=this.className.indexOf(" qs_container_selected");t>-1&&(this.className=this.className.substr(0,t))},!0),this._content.appendChild(t),t},setPosition:function(t,e){return this._panel.style.left=t+"px",this._panel.style.top=Math.max(e,0)+"px",this},setSize:function(t,e){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this._content.style.height=e-this._titleBar.offsetHeight+"px",this},setWidth:function(t){return this._panel.style.width=t+"px",this._content.style.width=t+"px",this},setHeight:function(t){return this._content.style.height=t-this._titleBar.offsetHeight+"px",this},setDraggable:function(t){return this._draggable=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},_startDrag:function(t){this._draggable&&(this._panel.style.zIndex=++a._topZ,document.addEventListener("mousemove",this._drag),document.addEventListener("mouseup",this._endDrag),this._startX=t.clientX,this._startY=t.clientY),t.preventDefault()},_drag:function(t){var e=parseInt(this._panel.style.left),i=parseInt(this._panel.style.top),n=t.clientX,r=t.clientY;this.setPosition(e+n-this._startX,i+r-this._startY),this._startX=n,this._startY=r,t.preventDefault()},_endDrag:function(t){document.removeEventListener("mousemove",this._drag),document.removeEventListener("mouseup",this._endDrag),t.preventDefault()},setGlobalChangeHandler:function(t){return this._globalChangeHandler=t,this},_callGCH:function(){this._localStorageName&&this._saveInLocalStorage(this._localStorageName),this._globalChangeHandler&&this._globalChangeHandler()},hide:function(){return this._panel.style.visibility="hidden",this._hidden=!0,this},show:function(){return this._panel.style.visibility="visible",this._panel.style.zIndex=++a._topZ,this._hidden=!1,this},toggleVisibility:function(){return this._hidden?this.show():this.hide(),this},setCollapsible:function(t){return this._collapsible=t,this._draggable||this._collapsible?this._titleBar.style.cursor="pointer":this._titleBar.style.cursor="default",this},collapse:function(){return this._panel.removeChild(this._content),this._collapsed=!0,this},expand:function(){return this._panel.appendChild(this._content),this._collapsed=!1,this},toggleCollapsed:function(){return this._collapsed?this.expand():this.collapse(),this},setKey:function(t){return this._keyCode=t.toUpperCase().charCodeAt(0),document.body.addEventListener("keyup",this.onKeyUp),this},_onKeyUp:function(t){t.keyCode===this._keyCode&&this.toggleVisibility()},_doubleClickTitle:function(){this._collapsible&&this.toggleCollapsed()},removeControl:function(t){if(this._controls[t])var e=this._controls[t].container;return e&&e.parentElement&&e.parentElement.removeChild(e),this._controls[t]=null,this},enableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!1),this},disableControl:function(t){return this._controls[t]&&(this._controls[t].control.disabled=!0),this},hideControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="none"),this},showControl:function(t){return this._controls[t]&&(this._controls[t].container.style.display="block"),this},overrideStyle:function(t,e,i){return this._controls[t]&&(this._controls[t].control.style[e]=i),this},hideTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="none"),this},showTitle:function(t){var e=this._controls[t].label;return e&&(e.style.display="block"),this},hideAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="none")}return this},showAllTitles:function(){for(var t in this._controls){var e=this._controls[t].label;e&&(e.style.display="block")}return this},getValue:function(t){return this._controls[t].getValue()},setValue:function(t,e){return this._controls[t].setValue(e),this._callGCH(),this},addBoolean:function(t,e,r){var s=this._createContainer(),o=n("label",null,"qs_checkbox_label",s);o.textContent=t,o.setAttribute("for",t);var a=n("label",null,"qs_checkbox",s);a.setAttribute("for",t);var l=i("checkbox",t,null,a);l.checked=e,n("span",null,null,a),this._controls[t]={container:s,control:l,getValue:function(){return this.control.checked},setValue:function(t){this.control.checked=t,r&&r(t)}};var h=this;return l.addEventListener("change",function(){r&&r(l.checked),h._callGCH()}),this},bindBoolean:function(t,e,i){return this.addBoolean(t,e,function(e){i[t]=e})},addButton:function(t,e){var n=this._createContainer(),r=i("button",t,"qs_button",n);r.value=t,this._controls[t]={container:n,control:r};var s=this;return r.addEventListener("click",function(){e&&e(r),s._callGCH()}),this},addColor:function(t,s,o){if(function(){var t=navigator.userAgent.toLowerCase();return!(t.indexOf("chrome")>-1||t.indexOf("firefox")>-1||t.indexOf("epiphany")>-1)&&t.indexOf("safari/")>-1}()||navigator.userAgent.toLowerCase().indexOf("edge")>-1||r())return this.addText(t,s,o);var a=this._createContainer(),l=e("<b>"+t+":</b> "+s,a),h=i("color",t,"qs_color",a);h.value=s||"#ff0000";var c=n("label",null,"qs_color_label",a);c.setAttribute("for",t),c.style.backgroundColor=h.value,this._controls[t]={container:a,control:h,colorLabel:c,label:l,title:t,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,this.colorLabel.style.backgroundColor=h.value,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,o&&o(t)}};var u=this;return h.addEventListener("input",function(){l.innerHTML="<b>"+t+":</b> "+h.value,c.style.backgroundColor=h.value,o&&o(h.value),u._callGCH()}),this},bindColor:function(t,e,i){return this.addColor(t,e,function(e){i[t]=e})},addDate:function(t,n,s){var o;if(n instanceof Date){var a=n.getFullYear(),l=n.getMonth()+1;l<10&&(l="0"+l),o=a+"-"+l+"-"+n.getDate()}else o=n;if(r())return this.addText(t,o,s);var h=this._createContainer(),c=e("<b>"+t+"</b>",h),u=i("date",t,"qs_text_input",h);u.value=o||"",this._controls[t]={container:h,control:u,label:c,getValue:function(){return this.control.value},setValue:function(t){var e;if(t instanceof Date){var i=t.getFullYear(),n=t.getMonth()+1;n<10&&(n="0"+n);var r=t.getDate();r<10&&(r="0"+r),e=i+"-"+n+"-"+r}else e=t;this.control.value=e||"",s&&s(e)}};var d=this;return u.addEventListener("input",function(){s&&s(u.value),d._callGCH()}),this},bindDate:function(t,e,i){return this.addDate(t,e,function(e){i[t]=e})},addDropDown:function(t,i,r){for(var s=this._createContainer(),o=e("<b>"+t+"</b>",s),a=n("select",null,"qs_select",s),l=0;l<i.length;l++){var h=n("option");h.label=i[l],h.innerText=i[l],a.add(h)}var c=this;return a.addEventListener("change",function(){var t=a.selectedIndex,e=a.options;r&&r({index:t,value:e[t].label}),c._callGCH()}),this._controls[t]={container:s,control:a,label:o,getValue:function(){var t=this.control.selectedIndex;return{index:t,value:this.control.options[t].label}},setValue:function(t){var e;e=null!=t.index?t.index:t;var i=this.control.options;this.control.selectedIndex=e,r&&r({index:e,value:i[e].label})}},this},bindDropDown:function(t,e,i){return this.addDropDown(t,e,function(e){i[t]=e.value})},addElement:function(t,i){var n=this._createContainer(),r=e("<b>"+t+"</b>",n);return n.appendChild(i),this._controls[t]={container:n,label:r},this},addFileChooser:function(t,r,s,o){var a=this._createContainer(),l=e("<b>"+t+"</b>",a),h=i("file",t,"qs_file_chooser",a);s&&(h.accept=s);var c=n("label",null,"qs_file_chooser_label",a);c.setAttribute("for",t),c.textContent=r||"Choose a file...",this._controls[t]={container:a,control:h,label:l,getValue:function(){return this.control.files[0]}};var u=this;return h.addEventListener("change",function(){h.files&&h.files.length&&(c.textContent=h.files[0].name,o&&o(h.files[0]),u._callGCH())}),this},addHTML:function(t,i){var r=this._createContainer(),s=e("<b>"+t+":</b> ",r),o=n("div",null,null,r);return o.innerHTML=i,this._controls[t]={label:s,control:o,getValue:function(){return this.control.innerHTML},setValue:function(t){this.control.innerHTML=t}},this},addImage:function(t,i){var r=this._createContainer(),s=e("<b>"+t+"</b>",r);return img=n("img",null,"qs_image",r),img.src=i,this._controls[t]={container:r,control:img,label:s,getValue:function(){return this.control.src},setValue:function(t){this.control.src=t}},this},addRange:function(t,e,i,n,r,s){return this._addNumber("range",t,e,i,n,r,s)},addNumber:function(t,e,i,n,r,s){return this._addNumber("number",t,e,i,n,r,s)},_addNumber:function(t,n,s,o,a,l,h){var c=this._createContainer(),u=e("",c),d=i(t,n,"range"===t?"qs_range":"qs_text_input qs_number",c);d.min=s||0,d.max=o||100,d.step=l||1,d.value=a||0,u.innerHTML="<b>"+n+":</b> "+d.value,this._controls[n]={container:c,control:d,label:u,title:n,callback:h,getValue:function(){return parseFloat(this.control.value)},setValue:function(t){this.control.value=t,this.label.innerHTML="<b>"+this.title+":</b> "+this.control.value,h&&h(parseFloat(t))}};var p="input";"range"===t&&r()&&(p="change");var f=this;return d.addEventListener(p,function(){u.innerHTML="<b>"+n+":</b> "+d.value,h&&h(parseFloat(d.value)),f._callGCH()}),this},bindRange:function(t,e,i,n,r,s){return this.addRange(t,e,i,n,r,function(e){s[t]=e})},bindNumber:function(t,e,i,n,r,s){return this.addNumber(t,e,i,n,r,function(e){s[t]=e})},setRangeParameters:function(t,e,i,n){return this.setNumberParameters(t,e,i,n)},setNumberParameters:function(t,e,i,n){var r=this._controls[t],s=r.control.value;return r.control.min=e,r.control.max=i,r.control.step=n,r.control.value!==s&&r.callback&&r.callback(r.control.value),this},addPassword:function(t,e,i){return this._addText("password",t,e,i)},bindPassword:function(t,e,i){return this.addPassword(t,e,function(e){i[t]=e})},addProgressBar:function(t,i,r,s){var o=this._createContainer(),a=e("",o),l=n("div",null,"qs_progress",o),h=n("div",null,"qs_progress_value",l);return h.style.width=r/i*100+"%",a.innerHTML="numbers"===s?"<b>"+t+":</b> "+r+" / "+i:"percent"===s?"<b>"+t+":</b> "+Math.round(r/i*100)+"%":"<b>"+t+"</b>",this._controls[t]={container:o,control:l,valueDiv:h,valueDisplay:s,label:a,value:r,max:i,title:t,getValue:function(){return this.value},setValue:function(t){this.value=Math.max(0,Math.min(t,this.max)),this.valueDiv.style.width=this.value/this.max*100+"%","numbers"===this.valueDisplay?this.label.innerHTML="<b>"+this.title+":</b> "+this.value+" / "+this.max:"percent"===this.valueDisplay&&(this.label.innerHTML="<b>"+this.title+":</b> "+Math.round(this.value/this.max*100)+"%")}},this},setProgressMax:function(t,e){var i=this._controls[t];return i.max=e,i.value=Math.min(i.value,i.max),i.valueDiv.style.width=i.value/i.max*100+"%","numbers"===i.valueDisplay?i.label.innerHTML="<b>"+i.title+":</b> "+i.value+" / "+i.max:"percent"===i.valueDisplay?i.label.innerHTML="<b>"+i.title+":</b> "+Math.round(i.value/i.max*100)+"%":i.label.innerHTML="<b>"+i.title+"</b>",this},addText:function(t,e,i){return this._addText("text",t,e,i)},_addText:function(t,r,s,o){var a,l=this._createContainer(),h=e("<b>"+r+"</b>",l);"textarea"===t?(a=n("textarea",r,"qs_textarea",l)).rows=5:a=i(t,r,"qs_text_input",l),a.value=s||"",this._controls[r]={container:l,control:a,label:h,getValue:function(){return this.control.value},setValue:function(t){this.control.value=t,o&&o(t)}};var c=this;return a.addEventListener("input",function(){o&&o(a.value),c._callGCH()}),this},bindText:function(t,e,i){return this.addText(t,e,function(e){i[t]=e})},addTextArea:function(t,e,i){return this._addText("textarea",t,e,i)},setTextAreaRows:function(t,e){return this._controls[t].control.rows=e,this},bindTextArea:function(t,e,i){return this.addTextArea(t,e,function(e){i[t]=e})},addTime:function(t,n,s){var o;if(n instanceof Date){var a=n.getHours();a<10&&(a="0"+a);var l=n.getMinutes();l<10&&(l="0"+l);var h=n.getSeconds();h<10&&(h="0"+h),o=a+":"+l+":"+h}else o=n;if(r())return this.addText(t,o,s);var c=this._createContainer(),u=e("<b>"+t+"</b>",c),d=i("time",t,"qs_text_input",c);d.value=o||"",this._controls[t]={container:c,control:d,label:u,getValue:function(){return this.control.value},setValue:function(t){var e;if(t instanceof Date){var i=t.getHours();i<10&&(i="0"+i);var n=t.getMinutes();n<10&&(n="0"+n);var r=t.getSeconds();r<10&&(r="0"+r),e=i+":"+n+":"+r}else e=t;this.control.value=e||"",s&&s(e)}};var p=this;return d.addEventListener("input",function(){s&&s(d.value),p._callGCH()}),this},bindTime:function(t,e,i){return this.addTime(t,e,function(e){i[t]=e})}};t.exports=a}()},function(t,e,i){var n=i(7);"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};i(9)(n,r);n.locals&&(t.exports=n.locals)},function(t,e,i){(t.exports=i(8)(!1)).push([t.i,"div.context-menu {\r\n\tposition : fixed;\r\n\tborder: 1px solid #ccc;\r\n\tbackground-color: #eee;\r\n\tmin-width : 100px;\r\n\tpadding: 2px;\r\n\tbox-shadow : 2px 2px 4px #444;\r\n\tdisplay : inline-block;\r\n\tz-index : 10002;\r\n\tcursor : default;\r\n}\r\n\r\ndiv.context-menu>div {\r\n\tpadding : 5px 25px;\r\n\tfont-family: sans-serif;\r\n\tfont-size: 0.8em;\r\n}\r\n\r\ndiv.context-menu-item:hover {\r\n\tbackground-color : #c3d6ee;\r\n}\r\n\r\ndiv.context-menu-item-disabled {\r\n\tcolor : #aaa;\r\n}\r\n",""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var r=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),s=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(s).concat([r]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(n[s]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(t,e,i){var n={},r=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),s=function(t){var e={};return function(t,i){if("function"==typeof t)return t();if(void 0===e[t]){var n=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,i);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),o=null,a=0,l=[],h=i(10);function c(t,e){for(var i=0;i<t.length;i++){var r=t[i],s=n[r.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](r.parts[o]);for(;o<r.parts.length;o++)s.parts.push(g(r.parts[o],e))}else{var a=[];for(o=0;o<r.parts.length;o++)a.push(g(r.parts[o],e));n[r.id]={id:r.id,refs:1,parts:a}}}}function u(t,e){for(var i=[],n={},r=0;r<t.length;r++){var s=t[r],o=e.base?s[0]+e.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};n[o]?n[o].parts.push(a):i.push(n[o]={id:o,parts:[a]})}return i}function d(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),l.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(t.insertAt.before,i);i.insertBefore(e,r)}}function p(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=l.indexOf(t);e>=0&&l.splice(e,1)}function f(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return i.nc}();n&&(t.attrs.nonce=n)}return b(e,t.attrs),d(t,e),e}function b(t,e){Object.keys(e).forEach(function(i){t.setAttribute(i,e[i])})}function g(t,e){var i,n,r,s;if(e.transform&&t.css){if(!(s="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=s}if(e.singleton){var l=a++;i=o||(o=f(e)),n=v.bind(null,i,l,!1),r=v.bind(null,i,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",b(e,t.attrs),d(t,e),e}(e),n=function(t,e,i){var n=i.css,r=i.sourceMap,s=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||s)&&(n=h(n));r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var o=new Blob([n],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(o),a&&URL.revokeObjectURL(a)}.bind(null,i,e),r=function(){p(i),i.href&&URL.revokeObjectURL(i.href)}):(i=f(e),n=function(t,e){var i=e.css,n=e.media;n&&t.setAttribute("media",n);if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),r=function(){p(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=u(t,e);return c(i,e),function(t){for(var r=[],s=0;s<i.length;s++){var o=i[s];(a=n[o.id]).refs--,r.push(a)}t&&c(u(t,e),e);for(s=0;s<r.length;s++){var a;if(0===(a=r[s]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete n[a.id]}}}};var m=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function v(t,e,i,n){var r=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=m(e,r);else{var s=document.createTextNode(r),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(s,o[e]):t.appendChild(s)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,n=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var r,s=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?t:(r=0===s.indexOf("//")?s:0===s.indexOf("/")?i+s:n+s.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},function(t,e,i){"use strict";i.r(e);var n=i(2);function r(t,e){return parseFloat(t.toFixed(e))}class s{constructor(t,e){this.set(t,e)}set(t,e){this.x=t,this.y=e}static fromObject(t){return new s(t.x,t.y)}static dist(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}static swap(t,e,i){let n=t[i];t[i]=e[i],e[i]=n}isEmpty(){return!this.x&&!this.y}oneIsEmpty(){return!this.x||!this.y}sum(t){return new s(this.x+t.x,this.y+t.y)}add(t){this.x+=t.x,this.y+=t.y}diff(t){return new s(this.x-t.x,this.y-t.y)}sub(t){this.x-=t.x,this.y-=t.y}move(t){this.add(t)}getPosition(){return this}setPosition(t){this.set(t.x,t.y)}clone(){return new s(this.x,this.y)}invert(){return new s(-this.x,-this.y)}toStr(t,e,i){return r(this[e]*i,t)}toHtml(t,e=1){return this.toStr(t,"x",e)+","+this.toStr(t,"y",e)}}i(1);class o{constructor(t,e=[],i,n,r=0){this.setShape(t),this.setCoords(e),this.setHref(i),this.setTitle(n),this.setId(r)}static fromObject(t){switch(t.shape){case"rect":return new h(t.coords.map(s.fromObject),t.href,t.title,t.id);case"circle":return new a(t.coords.map(s.fromObject),t.radius,t.href,t.title,t.id);case"poly":return new l(t.coords.map(s.fromObject),t.href,t.title,t.id,t.closed);case"default":return new c(t.href,t.title);default:throw"Not an area"}}setShape(t){this.shape=t}addCoord(t){return this.coords.push(t)}setCoords(t){this.coords=t}getCoords(t="default"){switch(t){case"default":default:return this.coords.slice()}}getPoints(){return this.coords}isEmpty(){return 0==this.coords.length}equals(t){return this.id==t.id}copyCoords(){let t=[];return this.coords.forEach((e,i)=>{t[i]=new s(e.x,e.y)}),t}updateLastCoord(t){this.coords[this.coords.length-1]=t}move(t){let e=this.firstCoord();void 0!=t&&e.add(t)}getPosition(){return this.firstCoord()}setPosition(t){let e=this.coords[0].diff(t);this.move(e)}isDrawable(){return this.coords.length>=1}isValidShape(){return this.isDrawable()}isOver(t){return!1}isOverPoint(t,e){let i=this.getPoints().find(i=>s.dist(t,i)<e);return i||!1}setHref(t){this.href=t}setTitle(t){this.title=t}setId(t){this.id=t}firstCoord(){return this.coords[0]}htmlCoords(t,e){return this.getCoords("html").map(e=>e.toHtml(t)).join(",")}toHtml(t=1){let e=this.htmlCoords(0,t),i="";return""!=e&&(e=`coords="${e}"`),this.title&&(i=`title="${this.title}"`),`<area shape="${this.shape}" ${e} href="${this.href}" alt="${this.href}" ${i} />`}svgArea(t){}toSvg(t=1){return`<a xlink:href="${this.href}">${this.svgArea(t)}</a>`}}class a extends o{constructor(t=[],e=0,i,n,r){super("circle",t,i,n,r),this.radius=e}getCenter(){return this.firstCoord()}isValidShape(){return super.isValidShape()&&this.radius>0}isOver(t){let e=this.getCenter();return s.dist(t,e)<this.radius}updateLastCoord(t){let e=this.getCenter();this.radius=s.dist(e,t)}display(t){t.ellipse(this.getCenter().x,this.getCenter().y,2*this.radius)}htmlCoords(t,e){return this.getCenter().toHtml(t,e)+","+r(this.radius,t)}svgArea(t){return`<circle cx="${this.coords[0].toStr(0,"x",t)}" cy="${this.coords[0].toStr(0,"y",t)}" r="${r(this.radius,0)}" />`}}class l extends o{constructor(t=[],e,i,n,r=!1){super("poly",t,e,i,n),this.closed=r}isDrawable(){return this.coords.length>=2}isValidShape(){return super.isValidShape()&&this.closed}isOver(t){let e,i=t.x,n=t.y,r=this.coords.map(t=>t.x),s=this.coords.map(t=>t.y),o=r.length-1,a=!1,l=r,h=s;for(e=0;e<r.length;e++)(h[e]<n&&h[o]>=n||h[o]<n&&h[e]>=n)&&(l[e]<=i||l[o]<=i)&&(a^=l[e]+(n-h[e])/(h[o]-h[e])*(l[o]-l[e])<i),o=e;return a}isClosable(t,e){let i=s.dist(t,this.firstCoord());return this.coords.length>=4&&i<e}getCoords(t="default"){let e=super.getCoords();switch(t){case"default":default:return this.closed&&e.push(this.firstCoord()),e}}close(){this.closed=!0,this.coords.pop()}move(t){this.coords.map(e=>e.add(t))}display(t){t.beginShape(),this.getCoords().forEach(e=>t.vertex(e.x,e.y)),t.endShape()}svgArea(t){return`<polygon points="${this.getCoords().map(e=>e.toStr(0,"x",t)+","+e.toStr(0,"y",t)).join(" ")}" />`}}class h extends l{constructor(t=[],e,i,n){if(super(t,e,i,n,!0),this.coords.length>0&&this.coords.length<4){let t=this.firstCoord();this.coords=[t,t.clone(),t.clone(),t.clone()]}}updateLastCoord(t){this.coords[1].x=t.x,this.coords[2]=t,this.coords[3].y=t.y}}class c extends o{constructor(t,e){super("default",[],t,e),this.isDefault=!0}isDrawable(){return!0}isOver(){return!0}display(t){t.rect(0,0,t.getMap().width-1,t.getMap().height-1)}svgArea(t){return'<rect x="0" y="0" width="100%" height="100%" />'}}class u{constructor(t,e,i=[],n,r=!1){this.name=n,this.width=t,this.height=e,this.areas=i,this.dArea=new c,this.hasDefaultArea=r,this.lastId=0}setFromObject(t){for(const e in t)if(t.hasOwnProperty(e)){let i=t[e];"areas"==e?this.areas=i.map(o.fromObject):"dArea"==e?this.dArea=o.fromObject(i):Object.keys(this).includes(e)&&(this[e]=i)}}setName(t){t&&(this.name=t.replace(/\s+/g,""))}setSize(t,e){this.width=t,this.height=e}setDefaultArea(t){this.hasDefaultArea=t}getAreas(t=!0){let e=this.areas.slice();return t&&this.hasDefaultArea&&e.push(this.dArea),e}addArea(t,e=!0){return e&&t.setId(this.getNewId()),this.areas.unshift(t),t.id}rmvArea(t){let e=this.areaIndex(t);return this.areas.splice(e,1),e}moveArea(t,e){let i=this.areaIndex(t),n=this.areas[i],r=i+e;return!(r<0||r>=this.areas.length)&&(this.rmvArea(t),this.insertArea(n,r),r)}shiftArea(){return this.areas.shift()}popArea(){return this.areas.pop()}insertArea(t,e){this.areas.splice(e,0,t)}areaIndex(t){return this.areas.findIndex(e=>e.id==t)}isFirstArea(t){return 0==this.areaIndex(t)}isLastArea(t){return this.areaIndex(t)==this.areas.length-1}getNewId(){return this.lastId++,this.lastId}toHtml(t=1){let e=[];return this.getAreas().forEach(i=>{i.isValidShape()&&e.push("\t"+i.toHtml(t))}),'<map name="'+this.name+'" id="'+this.name+'">\n'+e.join("\n")+"\n</map>"}toSvg(t=1){let e=[];this.getAreas(!1).forEach(i=>{i.isValidShape()&&e.push("\t"+i.toSvg(t))});let i='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.width+'" height="'+this.height+'">\n';return i+=e.join("\n"),i+="\n</svg>"}clearAreas(){this.areas=[]}setAreas(t){this.areas=t}}class d{constructor(t,e=15){this.speed=e,this.alpha=0,this.over=!1,this.p5=t.p5}appear(){this.over=!0}disappear(){this.over=!1}display(){this.over?this.alpha<100&&(this.alpha+=this.speed):this.alpha>0&&(this.alpha-=this.speed),this.p5.noStroke(),this.p5.fill(255,255,255,this.alpha),this.p5.rect(iMap.trueX(0),iMap.trueY(0),this.p5.width/iMap.view.scale,this.p5.height/iMap.view.scale)}}class p{constructor(t=null,e=null){this.area=t,this.point=e,this.setOrigin(new s)}setOrigin(t=null){this.origin=t.clone()}autosetOrigin(){this.isEmpty()||this.setOrigin(this.getPosition())}update(t,e){this.area=t,this.point=e,this.autosetOrigin()}getArea(){return!!this.area&&this.area}getPoint(){return!!this.point&&this.point}value(){return this.point?this.getPoint():this.getArea()}getMove(){return this.getPosition().diff(this.origin)}clear(){this.area=null,this.point=null,this.origin=new s}isEmpty(){return!this.area&&!this.point}move(t){this.point?this.point.move(t):this.area.move(t)}getPosition(){return this.point?this.point.getPosition():this.area.getPosition()}setPosition(t){this.point?this.point.setPosition(t):this.area.setPosition(t)}}var f=i(3),b=i.n(f),g=i(4),m=i.n(g),v=i(5),x=i.n(v),w=i(0),_=i.n(w);i(6);i.d(e,"imageMapCreator",function(){return A});class A{constructor(t=600,e=450){this.width=t,this.height=e,this.tool="polygon",this.drawingTools=["rectangle","circle","polygon"],this.settings,this.menu={SetUrl:{onSelect:(t,e,i,n)=>{this.setAreaUrl(n)},label:"Set url"},SetTitle:{onSelect:(t,e,i,n)=>{this.setAreaTitle(n)},label:"Set title"},Delete:(t,e,i,n)=>{this.deleteArea(n)},MoveFront:{onSelect:(t,e,i,n)=>{this.moveArea(n,-1)},enabled:!0,label:"Move Forward"},MoveBack:{onSelect:(t,e,i,n)=>{this.moveArea(n,1)},enabled:!0,label:"Move Backward"}},this.tempArea=new o,this.selected=new p,this.hoveredArea=!1,this.hoveredPoint=!1,this.map=new u(t,e),this.undoManager=new m.a,this.img,this.view={scale:1,transX:0,transY:0},this.zoomParams={min:.03,max:3,sensativity:.001},this.magnetism=!0,this.fusion=!1,this.tolerance=6}sketch(t){this.p5=t,this.bgLayer=new d(this),t.setup=(()=>{t.createCanvas(this.width,this.height).drop(this.handeFile.bind(this)).dragLeave(this.onLeave.bind(this)).dragOver(this.onOver.bind(this)),this.settings=x.a.create(t.width+5,0,"Image-map Creator",t.canvas.parentElement).setDraggable(!1).addText("Map Name","",t=>{this.map.setName(t)}).addDropDown("Tool",["polygon","rectangle","circle","select","delete","test"],t=>{this.setTool(t.value)}).addBoolean("Default Area",this.map.hasDefaultArea,t=>{this.setDefaultArea(t)}).addButton("Undo",this.undoManager.undo).addButton("Redo",this.undoManager.redo).addButton("Clear",this.clearAreas.bind(this)).addButton("Generate Html",()=>{this.settings.setValue("Output",this.map.toHtml())}).addButton("Generate Svg",()=>{this.settings.setValue("Output",this.map.toSvg())}).addTextArea("Output").addButton("Save",this.exportMap.bind(this)),t.canvas.addEventListener("contextmenu",t=>{t.preventDefault()}),t.canvas.addEventListener("mousedown",t=>{t.preventDefault()}),document.getElementById("Output").setAttribute("onFocus","this.select();")}),t.draw=(()=>{this.updateTempArea(),this.updateHovered(),this.setCursor(),this.setOutput(),this.setBackground(),this.setTitle(this.hoveredArea),t.translate(this.view.transX,this.view.transY),t.scale(this.view.scale),this.drawImage(),this.bgLayer.display(),this.drawAreas()}),t.getMap=(()=>this.map),t.mousePressed=(()=>{if(this.mouseIsHoverSketch()){let e=this.drawingCoord();if(t.mouseButton==t.LEFT&&!_.a.isOpen())switch(this.tool){case"circle":case"rectangle":this.setTempArea(e);break;case"polygon":this.tempArea.isEmpty()?this.setTempArea(e):this.tempArea.isClosable(this.mCoord(),this.tolerance/this.view.scale)?(this.tempArea.close(),this.tempArea.isValidShape()&&this.createArea(this.tempArea),this.tempArea=new o):this.tempArea.addCoord(this.mCoord());break;case"select":this.selected.update(this.hoveredArea,this.hoveredPoint)}}}),t.mouseDragged=(()=>{if(this.mouseIsHoverSketch()&&!_.a.isOpen())if(t.mouseButton==t.LEFT)switch(this.tool){case"select":if(this.selected.value())if(this.selected.getPoint())this.selected.setPosition(this.drawingCoord());else{let e=new s(this.mX()-this.trueX(t.pmouseX),this.mY()-this.trueY(t.pmouseY));this.selected.move(e)}}else t.mouseButton==t.CENTER&&(this.view.transX+=t.mouseX-t.pmouseX,this.view.transY+=t.mouseY-t.pmouseY)}),t.mouseReleased=(t=>{switch(this.tool){case"rectangle":case"circle":this.tempArea.isValidShape()&&this.createArea(this.tempArea),this.tempArea=new o;break;case"select":let t=this.selected.value();if(t){let e=this.selected.getMove();this.undoManager.add({undo:()=>{t.move(e.invert())},redo:()=>{t.move(e)}})}}this.onClick(t),this.bgLayer.disappear()}),t.mouseWheel=(t=>{if(this.mouseIsHoverSketch()){let e=this.view.scale*this.zoomParams.sensativity*-t.delta;return this.zoom(e),!1}}),t.keyPressed=(t=>{if(t.composed&&t.ctrlKey){switch(t.key){case"s":this.exportMap();break;case"z":this.undoManager.undo();break;case"y":this.undoManager.redo();break;default:return!0}return!1}"polygon"==this.tool&&t.keyCode==this.p5.ESCAPE&&(this.tempArea=new o)})}trueX(t){return(t-this.view.transX)/this.view.scale}trueY(t){return(t-this.view.transY)/this.view.scale}mX(){return this.trueX(this.p5.mouseX)}mY(){return this.trueY(this.p5.mouseY)}mCoord(){return new s(this.mX(),this.mY())}drawingCoord(){let t=this.mCoord();return t=this.magnetism&&this.hoveredPoint?this.hoveredPoint:t,this.fusion||(t=t.clone()),t}mouseIsHoverSketch(){return this.p5.mouseX<=this.p5.width&&this.p5.mouseX>=0&&this.p5.mouseY<=this.p5.height&&this.p5.mouseY>=0}updateHovered(){this.hoveredPoint=!1;let t=this.map.getAreas().find(t=>{if(t.equals(this.selected.getArea()))return!1;if("test"!=this.tool){let e=t.isOverPoint(this.mCoord(),this.tolerance/this.view.scale);if(e)return this.hoveredPoint=e,!0}return!!t.isOver(this.mCoord())});this.hoveredArea=t||!1}onClick(t){if(this.mouseIsHoverSketch()&&this.hoveredArea){if(this.p5.mouseButton==this.p5.RIGHT)return this.selected.update(this.hoveredArea),this.menu.MoveFront.enabled=!(this.map.isFirstArea(this.hoveredArea.id)||"default"==this.hoveredArea.shape),this.menu.MoveBack.enabled=!(this.map.isLastArea(this.hoveredArea.id)||"default"==this.hoveredArea.shape),_.a.display(t,this.menu,{position:"click",data:this.hoveredArea}),!1;if(this.p5.mouseButton==this.p5.LEFT&&!_.a.isOpen())switch(this.tool){case"test":!function(t,e=400,i=300){window.open(t,"_blank",`width=${e},height=${i}`)}(this.hoveredArea.href);break;case"delete":this.deleteArea(this.hoveredArea)}}this.selected.clear()}onOver(t){this.bgLayer.appear(),t.preventDefault()}onLeave(){this.bgLayer.disappear()}handeFile(t){"image"==t.type?(this.img=this.p5.loadImage(t.data,t=>this.resetView(t)),this.map.name||(this.map.setName(t.name),this.settings.setValue("Map Name",this.map.name))):"json"==t.subtype&&fetch(t.data).then(t=>t.blob()).then(t=>{let e=new FileReader;e.onload=(()=>{let t=e.result;console.log(t),this.importMap(t)}),e.readAsText(t)}),this.bgLayer.disappear()}resetView(t){this.view.scale=1,this.view.transX=0,this.view.transY=0;let e=this.p5.width/t.width,i=this.p5.height/t.height;e<this.view.scale&&(this.view.scale=e),i<this.view.scale&&(this.view.scale=i),this.map.setSize(t.width,t.height)}zoom(t){let e=this.view.scale+t;if(e>this.zoomParams.min&&e<this.zoomParams.max){let i=this.mX()*t,n=this.mY()*t;this.view.scale=e,this.view.transX-=i,this.view.transY-=n}}drawImage(){this.img&&this.p5.image(this.img,0,0,this.img.width,this.img.height)}drawAreas(){let t=[this.tempArea].concat(this.map.getAreas());for(let e=t.length;e--;){let i=t[e];this.setAreaStyle(i),i.isDrawable()&&i.display(this.p5)}if(this.hoveredPoint){let t=this.hoveredPoint;this.p5.fill(0),this.p5.noStroke(),this.p5.ellipse(t.x,t.y,6/this.view.scale)}}setTool(t){this.tool=t,this.tempArea=new o}setCursor(){if(this.drawingTools.includes(this.tool))switch(this.tool){case"polygon":if(!this.tempArea.isEmpty()&&this.tempArea.isClosable(this.mCoord(),5/this.view.scale)){this.p5.cursor(this.p5.HAND);break}default:this.p5.cursor(this.p5.CROSS)}else if(this.p5.cursor(this.p5.ARROW),this.hoveredArea)switch(this.tool){case"test":case"delete":this.p5.cursor(this.p5.HAND);break;case"select":this.hoveredPoint||this.p5.cursor(this.p5.MOVE)}}setOutput(){switch(this.tool){case"test":case"select":if(this.mouseIsHoverSketch()){let t=this.hoveredArea?this.hoveredArea.href:"none";this.settings.setValue("Output",t)}}}setBackground(){if(this.p5.background(200),!this.img){this.p5.noStroke(),this.p5.fill(0),this.p5.textAlign(this.p5.CENTER,this.p5.CENTER),this.p5.textSize(15);let t="Drag and drop an image and/or a .map.json save file here";this.p5.text(t,this.p5.width/2,this.p5.height/2)}}setTitle(t){"test"==this.tool&&t&&t.title?this.p5.canvas.setAttribute("title",t.title):this.p5.canvas.removeAttribute("title")}setAreaStyle(t){let e=this.p5.color(255,255,255,178);"test"==this.tool&&(e=this.p5.color(255,0)),(this.mouseIsHoverSketch()&&t==this.hoveredArea&&0==this.selected.getArea()&&("delete"==this.tool||"select"==this.tool)||this.selected.getArea()==t)&&(e=this.p5.color(255,200,200,178)),this.p5.fill(e),this.p5.strokeWeight(1/this.view.scale),"test"==this.tool?this.p5.noStroke():this.p5.stroke(0)}setTempArea(t){let e=[t];switch(this.tool){case"rectangle":this.tempArea=new h(e);break;case"circle":this.tempArea=new a(e);break;case"polygon":this.tempArea=new l(e),this.tempArea.addCoord(t)}}updateTempArea(){let t=this.drawingCoord();this.tempArea.isEmpty()||this.tempArea.updateLastCoord(t)}exportMap(){let t=JSON.stringify({version:n.a,map:this.map}),e=new Blob([t],{encoding:"UTF-8",type:"text/plain;charset=UTF-8"});b()(e,`${this.map.name}.map.json`,"application/json")}importMap(t){let e=JSON.parse(t).map;this.map.setFromObject(e),this.settings.setValue("Map Name",e.name),this.settings.setValue("Default Area",e.hasDefaultArea),this.reset()}createArea(t){this.map.addArea(t),this.undoManager.add({undo:()=>{t=this.map.shiftArea()},redo:()=>{this.map.addArea(t,!1)}})}deleteArea(t){let e=t.id;if(0===e)this.settings.setValue("Default Area",!1);else{let i=this.map.rmvArea(e);this.undoManager.add({undo:()=>{this.map.insertArea(t,i)},redo:()=>{this.map.rmvArea(e)}})}}moveArea(t,e){!1!==this.map.moveArea(t.id,e)&&this.undoManager.add({undo:()=>{this.map.moveArea(t.id,-e)},redo:()=>{this.map.moveArea(t.id,e)}})}setAreaUrl(t){let e=t.href,i=prompt("Enter the pointing url of this area",e||"http://");null!=i&&(t.setHref(i),this.undoManager.add({undo:()=>{t.setHref(e)},redo:()=>{t.setHref(i)}}))}setAreaTitle(t){let e=t.title,i=prompt("Enter the title of this area",e||"");null!=i&&(t.setTitle(i),this.undoManager.add({undo:()=>{t.setTitle(e)},redo:()=>{t.setTitle(i)}}))}setDefaultArea(t){this.map.setDefaultArea(t),this.undoManager.add({undo:()=>{this.map.setDefaultArea(!t),this.settings.setValue("Default Area",!t)},redo:()=>{this.map.setDefaultArea(t),this.settings.setValue("Default Area",t)}})}clearAreas(){let t=this.map.getAreas(!1);this.map.clearAreas(),this.undoManager.add({undo:()=>{this.map.setAreas(t)},redo:()=>{this.map.clearAreas()}})}reset(){this.undoManager.clear()}}}]));